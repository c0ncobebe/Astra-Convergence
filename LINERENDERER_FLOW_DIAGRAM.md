# ğŸ® LineRenderer Flow Diagram

## ğŸ“Š Luá»“ng hoáº¡t Ä‘á»™ng cá»§a LineRenderer

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        USER INTERACTION                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. HOLD START - NgÆ°á»i chÆ¡i báº¯t Ä‘áº§u hold trÃªn Star                   â”‚
â”‚    â”œâ”€ InputManager detects hold on Star                             â”‚
â”‚    â””â”€ GamePlayController.HandleHoldStart()                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. START CONNECTING                                                  â”‚
â”‚    â”œâ”€ OnStartConnecting(firstDot)                                   â”‚
â”‚    â”œâ”€ Star.OnConnected() - Äá»•i mÃ u star                            â”‚
â”‚    â””â”€ CREATE LINE:                                                   â”‚
â”‚        â€¢ Instantiate lineRendererPrefab                              â”‚
â”‚        â€¢ currentLineRenderer.StartDrawing(star.position)             â”‚
â”‚        â€¢ LineRenderer xuáº¥t hiá»‡n vá»›i width animation                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. HOLD UPDATE - NgÆ°á»i chÆ¡i drag qua cÃ¡c stars                      â”‚
â”‚    â”œâ”€ HandleHoldUpdate(screenPosition)                              â”‚
â”‚    â”œâ”€ Detect stars under finger                                     â”‚
â”‚    â”‚                                                                  â”‚
â”‚    â”œâ”€ IF: New star detected                                         â”‚
â”‚    â”‚   â”œâ”€ OnDotConnected(newStar)                                   â”‚
â”‚    â”‚   â”œâ”€ Star.OnConnected()                                        â”‚
â”‚    â”‚   â””â”€ currentLineRenderer.AddPoint(star.position)               â”‚
â”‚    â”‚                                                                  â”‚
â”‚    â””â”€ EVERY FRAME:                                                   â”‚
â”‚        â€¢ GetWorldPosition(fingerPosition)                            â”‚
â”‚        â€¢ currentLineRenderer.UpdateFingerPosition(worldPos)          â”‚
â”‚        â€¢ Line follows finger in real-time                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. HOLD END - NgÆ°á»i chÆ¡i tháº£ tay ra                                 â”‚
â”‚    â”œâ”€ HandleHoldEnd()                                               â”‚
â”‚    â””â”€ Check: connectedDots.Count > 1?                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â–¼                           â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   YES (â‰¥2 stars)     â”‚    â”‚   NO (<2 stars)      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                           â”‚
                    â–¼                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5A. FINISH CONNECTING         â”‚  â”‚ 5B. CANCEL CONNECTING         â”‚
â”‚    â”œâ”€ OnFinishConnecting()    â”‚  â”‚    â”œâ”€ OnCancelConnecting()    â”‚
â”‚    â””â”€ ValidateConnection()    â”‚  â”‚    â”œâ”€ ResetAllStars()         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â””â”€ LINE FADE OUT:          â”‚
                    â”‚               â”‚        â€¢ FadeOut(0.2s)        â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚        â€¢ Destroy line         â”‚
        â–¼                       â–¼   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   VALID      â”‚    â”‚   INVALID    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                   â”‚
        â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SUCCESS!     â”‚    â”‚ FAILED!      â”‚
â”‚ â”œâ”€ Keep line â”‚    â”‚ â”œâ”€ Reset     â”‚
â”‚ â”œâ”€ Keep      â”‚    â”‚ â”‚   stars    â”‚
â”‚ â”‚   stars    â”‚    â”‚ â””â”€ LINE:     â”‚
â”‚ â”‚   green    â”‚    â”‚     FadeOut  â”‚
â”‚ â””â”€ Score++   â”‚    â”‚     (0.3s)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ Visual States cá»§a LineRenderer

```
STATE 1: IDLE (Before connecting)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     â­    â­    â­           â”‚
â”‚                              â”‚
â”‚  â­         â­    â­         â”‚
â”‚                              â”‚
â”‚     â­    â­                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
No line visible


STATE 2: DRAWING (During drag)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     ğŸŒŸâ•â•â•ğŸŒŸ    â­           â”‚
â”‚          â•‘                    â”‚
â”‚  â­      â•‘     â­    â­      â”‚
â”‚          ğŸŒŸâ”€â”€â”€â”€â”€â”€â”€ğŸ‘†         â”‚
â”‚     â­    â­     (finger)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Yellow line following finger


STATE 3A: VALID CONNECTION
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     ğŸŒŸâ•â•â•ğŸŒŸ    â­           â”‚
â”‚          â•‘                    â”‚
â”‚  â­      ğŸŒŸ    â­    â­      â”‚
â”‚          â•‘                    â”‚
â”‚     â­   ğŸŒŸ                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Line kept, stars stay green


STATE 3B: INVALID CONNECTION
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     ğŸŒŸâ€¤â€¤â€¤â­    â­           â”‚
â”‚                              â”‚
â”‚  â­      â­    â­    â­      â”‚
â”‚                              â”‚
â”‚     â­   â­                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Line fading out, stars reset
```

---

## ğŸ”§ ConnectionLineRenderer Component Details

```csharp
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        ConnectionLineRenderer Component                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  ğŸ“‹ Properties:                                          â”‚
â”‚  â”œâ”€ lineRenderer: LineRenderer                          â”‚
â”‚  â”œâ”€ lineWidth: float (0.1)                              â”‚
â”‚  â”œâ”€ lineColor: Color (Yellow)                           â”‚
â”‚  â”œâ”€ lineMaterial: Material                              â”‚
â”‚  â”œâ”€ lineGrowSpeed: float (10)                           â”‚
â”‚  â”œâ”€ useGradient: bool                                   â”‚
â”‚  â””â”€ animateWidth: bool                                  â”‚
â”‚                                                          â”‚
â”‚  ğŸ¯ Methods:                                             â”‚
â”‚  â”œâ”€ StartDrawing(position)                              â”‚
â”‚  â”‚   â””â”€ Initialize line from first star                â”‚
â”‚  â”‚                                                       â”‚
â”‚  â”œâ”€ AddPoint(position)                                  â”‚
â”‚  â”‚   â””â”€ Add new star to line                           â”‚
â”‚  â”‚                                                       â”‚
â”‚  â”œâ”€ UpdateFingerPosition(position)                      â”‚
â”‚  â”‚   â””â”€ Update end point to follow finger              â”‚
â”‚  â”‚                                                       â”‚
â”‚  â”œâ”€ FinishDrawing()                                     â”‚
â”‚  â”‚   â””â”€ Stop following, finalize line                  â”‚
â”‚  â”‚                                                       â”‚
â”‚  â”œâ”€ Clear()                                             â”‚
â”‚  â”‚   â””â”€ Remove all points                              â”‚
â”‚  â”‚                                                       â”‚
â”‚  â””â”€ FadeOut(duration, callback)                         â”‚
â”‚      â””â”€ Animate line disappearing                       â”‚
â”‚                                                          â”‚
â”‚  ğŸ“Š Internal State:                                      â”‚
â”‚  â”œâ”€ connectedPositions: List<Vector3>                   â”‚
â”‚  â”œâ”€ currentFingerPosition: Vector3                      â”‚
â”‚  â””â”€ isDrawing: bool                                     â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¬ Animation Timeline

```
Time: 0s         0.3s        1.0s        2.0s        2.3s
      â”‚           â”‚           â”‚           â”‚           â”‚
      â”‚           â”‚           â”‚           â”‚           â”‚
START â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚           â”‚           â”‚           â”‚
      â”‚   Width   â”‚           â”‚           â”‚           â”‚
      â”‚   0â†’0.1   â”‚           â”‚           â”‚           â”‚
      â”‚           â”‚           â”‚           â”‚           â”‚
      â”‚           â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€USER DRAGGINGâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–º   â”‚
      â”‚           â”‚   Line follows finger             â”‚
      â”‚           â”‚   Points added dynamically        â”‚
      â”‚           â”‚                                   â”‚
      â”‚           â”‚                         END       â”‚
      â”‚           â”‚                          â”‚        â”‚
      â”‚           â”‚                    â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”  â”‚
      â”‚           â”‚                    â”‚  Valid?  â”‚  â”‚
      â”‚           â”‚                    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â”‚
      â”‚           â”‚                          â”‚        â”‚
      â”‚           â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚           â”‚            â”‚                            â”‚
      â”‚           â”‚          YES                           NO
      â”‚           â”‚            â”‚                            â”‚
      â”‚           â”‚       KEEP LINE              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚           â”‚                              â”‚   FadeOut(0.3s)    â”‚
      â”‚           â”‚                              â”‚   Width: 0.1â†’0     â”‚
      â”‚           â”‚                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ Data Flow

```
GamePlayController
        â”‚
        â”œâ”€ Has: lineRendererPrefab (Reference to prefab)
        â”œâ”€ Has: currentLineRenderer (Current instance)
        â”‚
        â””â”€ On Start Connecting:
            â”‚
            â–¼
    Instantiate(lineRendererPrefab)
            â”‚
            â–¼
    ConnectionLineRenderer Instance
            â”‚
            â”œâ”€ LineRenderer Component
            â”‚  â”œâ”€ positions[]
            â”‚  â”œâ”€ width
            â”‚  â””â”€ material
            â”‚
            â””â”€ Methods called by GamePlayController:
               â”œâ”€ StartDrawing()
               â”œâ”€ AddPoint()
               â”œâ”€ UpdateFingerPosition()
               â”œâ”€ FinishDrawing()
               â””â”€ FadeOut() / Clear()
```

---

## âœ… Checklist Ä‘á»ƒ test

- [ ] Prefab Ä‘Ã£ táº¡o trong Unity
- [ ] Material Ä‘Ã£ táº¡o vÃ  gÃ¡n
- [ ] Prefab Ä‘Ã£ gÃ¡n vÃ o GamePlayController
- [ ] LineRenderer width > 0
- [ ] Order in Layer = 10 (hiá»ƒn thá»‹ trÃªn stars)
- [ ] Test: Hold trÃªn star â†’ line xuáº¥t hiá»‡n
- [ ] Test: Drag qua stars â†’ line ná»‘i cÃ¡c stars
- [ ] Test: Line follows finger/mouse
- [ ] Test: Tháº£ ra vá»›i â‰¥2 stars â†’ line Ä‘Æ°á»£c giá»¯
- [ ] Test: Tháº£ ra vá»›i <2 stars â†’ line fade out

---

## ğŸ‰ Káº¿t quáº£ mong Ä‘á»£i

Khi test thÃ nh cÃ´ng, báº¡n sáº½ tháº¥y:
1. âœ¨ ÄÆ°á»ng line vÃ ng mÆ°á»£t mÃ  xuáº¥t hiá»‡n khi hold star
2. ğŸ¯ Line ná»‘i cÃ¡c stars khi drag qua
3. ğŸ‘† Line follows finger position in real-time
4. âœ… Line Ä‘Æ°á»£c giá»¯ láº¡i náº¿u ná»‘i Ä‘á»§ stars
5. ğŸ’« Line fade out mÆ°á»£t mÃ  náº¿u invalid

